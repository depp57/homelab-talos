namespaceOverride: infra-prometheus-stack

defaultRules:
  rules:
    alertmanager: false # AlertManager is not deployed as I don't need notifications
    kubeProxy: false    # kube-proxy is not deployed (replaced by Cilium)
    windows: false      # Self documented
    # I also disable the following rules to lower the power draw of my cluster
    configReloaders: false
    etcd: false
    kubelet: false
    kubeApiserverBurnrate: false
    kubeApiserverHistogram: false
    kubeApiserverSlos: false
    kubeControllerManager: false
    kubeSchedulerAlerting: false
    kubeSchedulerRecording: false
    nodeExporterAlerting: false

alertmanager:
  enabled: false

prometheus:
  prometheusSpec:
    scrapeInterval: 60s
    retention: 30d

grafana:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    hosts:
      - grafana.sachathommet.fr
    tls:
      - secretName: certificate-prod-grafana
        hosts:
          - grafana.sachathommet.fr
  sidecar:
    datasources:
      alertmanager:
        enabled: false

kubeEtcd:
  enabled: false

kubeProxy:
  enabled: false
